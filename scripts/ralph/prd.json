{
  "name": "TwoCups Sprint 2 - Polish & Limits",
  "branchName": "ralph/sprint-2-polish",
  "description": "Add daily limits, request limits, polish UI, and improve UX across all screens",
  "created": "2026-01-14",

  "decisions": {
    "D1_AuthMode": "Keep both anonymous + email/password for flexibility",
    "D2_Priority": "Focus on enforcing game rules (limits) and UX polish before new features"
  },

  "userStories": [
    {
      "id": "US-008",
      "title": "Enforce Daily Attempt Limit (20/day)",
      "description": "Before logging an attempt, check if user has already logged 20 attempts today. Show clear error if limit reached.",
      "acceptanceCriteria": [
        "Query today's attempts by current user before allowing log",
        "If >= 20 attempts today, show error message",
        "Display remaining attempts count on Log Attempt screen",
        "Counter resets at midnight (local time)"
      ],
      "priority": 1,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-009",
      "title": "Enforce Active Request Limit (5/player)",
      "description": "Users can have at most 5 active requests. Show count and prevent creating more when at limit.",
      "acceptanceCriteria": [
        "Query active requests count before allowing new request",
        "If >= 5 active requests, disable submit button",
        "Show 'X/5 active requests' counter on Make Request screen",
        "Clear error message when limit reached"
      ],
      "priority": 2,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-010",
      "title": "Toast Notification System",
      "description": "Create consistent toast component for success/error feedback across the app.",
      "acceptanceCriteria": [
        "Toast component shows at top or bottom of screen",
        "Supports success, error, and info variants",
        "Auto-dismisses after 3 seconds",
        "Log attempt success shows '+X gems' toast",
        "Request fulfillment shows special celebration toast",
        "Acknowledge success shows gem reward toast",
        "Errors show clear error toasts"
      ],
      "priority": 3,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-011",
      "title": "Loading and Empty States",
      "description": "Add proper loading spinners and friendly empty states to all screens.",
      "acceptanceCriteria": [
        "All screens show loading spinner during initial Firestore query",
        "LogAttemptScreen: empty state when no partner suggestions",
        "AcknowledgeScreen: empty state when no pending attempts",
        "ManageSuggestionsScreen: empty state when no suggestions",
        "MakeRequestScreen: show active requests list (even if empty)",
        "Empty states have friendly copy and hint text"
      ],
      "priority": 4,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-012",
      "title": "View Active & Fulfilled Requests",
      "description": "Add request history view showing active and fulfilled requests with status indicators.",
      "acceptanceCriteria": [
        "MakeRequestScreen shows list of user's requests",
        "Each request shows: action, category, status (active/fulfilled)",
        "Fulfilled requests show when and by which attempt",
        "Can filter by active/fulfilled/all",
        "User can delete active requests"
      ],
      "priority": 5,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-013",
      "title": "Cup Overflow Celebration",
      "description": "When a cup overflows (reaches 100 and resets), show a celebration animation.",
      "acceptanceCriteria": [
        "Detect cupOverflow flag from acknowledgeAttempt response",
        "Show celebration overlay with confetti or sparkle animation",
        "Display congratulatory message",
        "Works for individual cup overflow",
        "Works for collective cup overflow",
        "Animation auto-dismisses after 3-4 seconds"
      ],
      "priority": 6,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-014",
      "title": "Partner Suggestions in Log Attempt",
      "description": "Improve Log Attempt screen to better display partner's suggestions with category filtering.",
      "acceptanceCriteria": [
        "Partner suggestions displayed in scrollable list",
        "Category filter chips to filter suggestions",
        "Tapping suggestion auto-fills action and category",
        "Visual distinction between suggestions and custom entry",
        "Show suggestion count per category"
      ],
      "priority": 7,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    }
  ]
}
