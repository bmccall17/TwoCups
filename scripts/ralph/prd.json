{
  "name": "TwoCups Sprint 3 - History & Analytics",
  "branchName": "ralph/sprint-3-history",
  "description": "Add history timeline view and basic analytics to help players review past attempts and see relationship insights",
  "created": "2026-01-14",

  "decisions": {
    "D1_DateRange": "Default to last 7 days, allow 30-day and all-time views",
    "D2_Storage": "All data already in Firestore, just need query views",
    "D3_Charts": "Keep simple - text stats first, charts can come later"
  },

  "userStories": [
    {
      "id": "US-015",
      "title": "History Screen with Timeline View",
      "description": "Create a new History screen accessible from Settings or a new tab showing all attempts in chronological order.",
      "acceptanceCriteria": [
        "New History screen added to navigation (tab or settings link)",
        "Displays all attempts for the couple in reverse chronological order",
        "Each attempt card shows: action, description, who logged it, for whom, timestamp",
        "Shows acknowledged status with visual indicator (checkmark or badge)",
        "Paginated or infinite scroll for large datasets (load 20 at a time)",
        "Pull-to-refresh functionality"
      ],
      "priority": 1,
      "passes": true,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-016",
      "title": "History Filters - By Player",
      "description": "Add filter controls to view attempts logged by specific player or for specific player.",
      "acceptanceCriteria": [
        "Filter chips/tabs: All, By Me, For Me, By Partner, For Partner",
        "Filters update the query in real-time",
        "Show count of matching attempts",
        "Filters persist during session (reset on screen exit is OK)",
        "Clear visual indication of active filter"
      ],
      "priority": 2,
      "passes": false,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-017",
      "title": "History Filters - By Status",
      "description": "Add filter to show only pending or only acknowledged attempts.",
      "acceptanceCriteria": [
        "Filter options: All, Pending, Acknowledged",
        "Can combine with player filters (e.g., 'For Me' + 'Pending')",
        "Show count for each status",
        "Pending attempts highlighted or styled differently"
      ],
      "priority": 3,
      "passes": false,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-018",
      "title": "History Filters - By Category",
      "description": "Add category filter to view attempts by love language category.",
      "acceptanceCriteria": [
        "Category filter dropdown or chip selector",
        "Shows all 9 categories plus 'All' option",
        "Only shows categories that have attempts (hide empty categories)",
        "Can combine with other filters"
      ],
      "priority": 4,
      "passes": false,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-019",
      "title": "History Filters - By Date Range",
      "description": "Add date range filter to view attempts from specific time periods.",
      "acceptanceCriteria": [
        "Quick filters: Today, Last 7 Days, Last 30 Days, All Time",
        "Default to Last 7 Days",
        "Shows date range in header",
        "Efficient Firestore query using timestamp index"
      ],
      "priority": 5,
      "passes": false,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-020",
      "title": "Analytics Dashboard - Basic Stats",
      "description": "Create analytics section showing key relationship metrics.",
      "acceptanceCriteria": [
        "Analytics section on History screen or separate Analytics screen",
        "Shows total attempts logged (by each player)",
        "Shows total attempts acknowledged",
        "Shows acknowledgment rate (acknowledged / total as percentage)",
        "Shows total gems earned (each player)",
        "Stats update based on active date range filter"
      ],
      "priority": 6,
      "passes": false,
      "blocked": false,
      "blockedReason": null
    },
    {
      "id": "US-021",
      "title": "Analytics - Category Breakdown",
      "description": "Show which love language categories are used most frequently.",
      "acceptanceCriteria": [
        "List of categories with attempt counts",
        "Sorted by frequency (most used first)",
        "Shows percentage of total for each category",
        "Visual bar or indicator showing relative usage",
        "Separate breakdown for 'attempts I logged' vs 'attempts for me'"
      ],
      "priority": 7,
      "passes": false,
      "blocked": true,
      "blockedReason": "Depends on US-020"
    },
    {
      "id": "US-022",
      "title": "Analytics - Request Stats",
      "description": "Show request fulfillment statistics.",
      "acceptanceCriteria": [
        "Total requests made (each player)",
        "Total requests fulfilled",
        "Fulfillment rate percentage",
        "Average time to fulfill request (if data available)",
        "Most requested categories"
      ],
      "priority": 8,
      "passes": false,
      "blocked": true,
      "blockedReason": "Depends on US-020"
    }
  ]
}
